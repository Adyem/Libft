# Logger logging flag behaviour

The logger exposes two runtime switches that expand the amount of diagnostic
output generated by the library:

- `_alloc_logging` traces allocations that pass through the custom CMA
  allocator layer. The flag is disabled by default so the allocator incurs
  zero logging overhead unless verbose diagnostics are required.
- `_api_logging` traces the high level API request helpers. The flag is
  likewise disabled by default to keep normal network operations quiet.

Both toggles are surfaced through the global helpers declared in
[`Logger/logger.hpp`](../Logger/logger.hpp):

```c++
void    ft_log_set_alloc_logging(bool enable);
bool    ft_log_get_alloc_logging();

void    ft_log_set_api_logging(bool enable);
bool    ft_log_get_api_logging();
```

## Allocation logging

When `_alloc_logging` is enabled the CMA allocation wrappers emit `ft_log_debug`
statements that include both the requested size and the pointer that was
returned. The logging covers fast-path allocations that go directly through
`malloc` when the CMA subsystem is disabled as well as the allocator guard and
block management routines that serve requests from the managed arena.
Representative call sites include:

- [`cma_malloc`](../CMA/cma_malloc.cpp) – records the caller's size request and
  the address that was returned, including the rounded size when the allocator
  aligns the payload.【F:CMA/cma_malloc.cpp†L37-L76】
- [`cma_aligned_alloc`](../CMA/cma_aligned_alloc.cpp) – captures alignment
  adjustments and surface pointer addresses for the aligned region when the
  request succeeds.【F:CMA/cma_aligned_alloc.cpp†L138-L183】
- [`cma_free`](../CMA/cma_free.cpp) – announces the pointer being released so
  allocation/free mismatches are easier to trace.【F:CMA/cma_free.cpp†L12-L73】

Enabling the flag has no effect on allocator semantics: it only introduces the
extra debug logging calls. The logging is synchronous and should therefore be
restricted to development or diagnostic builds where observing allocator
behaviour outweighs the performance cost.

## API logging

The `_api_logging` flag instructs the networking API helpers to trace the
high-level operations they perform. The emitted messages record connection
endpoints, HTTP methods, and the state transitions that requests undergo across
retries and streaming callbacks. Examples include:

- [`api_request_stream`](../API/api_request.cpp) – reports the resolved host,
  port, method, and path before establishing or reusing a connection for a
  streaming request.【F:API/api_request.cpp†L12-L31】
- [`api_request_stream_tls`](../API/api_request_tls.cpp) – mirrors the
  plaintext logging while highlighting TLS handshakes and certificate
  negotiation steps.【F:API/api_request_tls.cpp†L318-L348】
- [`api_request_string`](../API/api_request.cpp) – records the host and request
  metadata when issuing convenience helpers that return fully buffered
  responses.【F:API/api_request.cpp†L307-L339】

As with allocation logging, the flag leaves request semantics unchanged. The
helpers simply emit additional `ft_log_debug` messages so that operators can
follow control flow when debugging complex integrations.

## Usage guidelines

- Toggle the flags at runtime with the global setters to scope the additional
  logging to the portion of the program being investigated. The getters allow
  tests to assert that a helper respected the requested logging mode.
- The logger defaults both switches to `false` in its constructor so processes
  start without verbose output unless explicitly requested.【F:Logger/logger_logger.cpp†L5-L11】
- Because the messages are produced on the hot path for allocations and network
  requests, keep the flags disabled in production builds and automation unless a
  specific issue requires the extra insight.

## Related tests

`Test/Test/test_logger.cpp` exercises the toggles to ensure they honour the
requested state and interact correctly with the global logger singleton. The
regressions cover transitions between enabled and disabled states for both
flags.【F:Test/Test/test_logger.cpp†L422-L476】

